# Data Directory Structure

This directory contains all input data, intermediate processing outputs, and generated RAG databases.

## Directory Layout

```
data/
├── source_pdfs/                                    # Source PDF files (not in git)
│   ├── Uganda_Clinical_Guidelines_2023.pdf
│   └── National integrated Community Case Management (iCCM) guidelines.pdf
├── docling_outputs/                                # Docling parser outputs (generated)
├── exports/                                        # Human-readable exports for validation (generated)
├── intermediate/                                   # Intermediate processing files (generated)
├── qa_reports/                                     # QA validation reports (generated)
├── Uganda_Clinical_Guidelines_2023_rag.db         # Generated SQLite databases
└── National integrated Community Case Management (iCCM) guidelines_rag.db
```

## Multi-Document Support

The pipeline supports processing multiple clinical guideline documents. Each document generates its own separate SQLite database file for portability.

**Active Document Selection:**

Edit `src/config.py` line ~165:
```python
ACTIVE_PDF = "Uganda_Clinical_Guidelines_2023.pdf"  # Change to your PDF
```

Database filename is auto-generated from PDF filename:
- `Uganda_Clinical_Guidelines_2023.pdf` → `Uganda_Clinical_Guidelines_2023_rag.db`
- `National integrated Community Case Management (iCCM) guidelines.pdf` → `National integrated Community Case Management (iCCM) guidelines_rag.db`

## Important Notes

### Source PDFs (source_pdfs/)

**Clinical guideline PDFs are NOT included in this repository.**

These are copyrighted medical documents. To use this pipeline:

1. Obtain official clinical guideline PDFs from their respective publishers
2. Place them in `data/source_pdfs/`
3. Set the active document:
   ```bash
   export ACTIVE_PDF="YourGuideline.pdf"
   ```
4. Run the pipeline (see below)

### Generated Files

All other files in this directory are generated by the ETL pipeline and are not tracked in git:

- **docling_outputs/**: JSON and markdown outputs from the Docling parser (Step 1)
- **exports/**: Section hierarchy trees and validation exports (Steps 2-7)
- **intermediate/**: Temporary processing files (various steps)
- **qa_reports/**: Quality assurance and validation reports (Step 7)
- **ucg23_rag.db**: Final portable SQLite database with vector embeddings (Step 6)

### Running the Pipeline

After placing PDFs in `source_pdfs/`:

**Step 1:** Edit `src/config.py` line ~165:
```python
ACTIVE_PDF = "Uganda_Clinical_Guidelines_2023.pdf"  # Your PDF filename
```

**Step 2:** Run the pipeline:
```bash
python src/main.py
```

The generated database file (e.g., `Uganda_Clinical_Guidelines_2023_rag.db`) contains the complete RAG database ready for deployment.

### Helper Scripts

```bash
# List all available databases
python scripts/list_databases.py
```

## Database Portability

Each generated SQLite database (e.g., `Uganda_Clinical_Guidelines_2023_rag.db`) is:
- **Portable**: Single file, works on any platform
- **Self-contained**: Includes full text content + vector embeddings
- **Offline-ready**: No API calls needed after generation
- **Versioned**: Includes checksums and metadata for reproducibility
- **Independent**: Each guideline has its own isolated database

Share database files for offline clinical RAG applications. Each database is completely standalone and can be distributed separately.
